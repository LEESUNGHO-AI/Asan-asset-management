<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“Š ì•„ì‚°ì‹œ í†µí•©ìì‚°ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e0e0e0;
        }
        .header {
            background: linear-gradient(90deg, rgba(59,130,246,0.2), rgba(139,92,246,0.2));
            padding: 20px 30px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .header h1 {
            font-size: 1.8rem;
            background: linear-gradient(90deg, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }
        .header-info {
            font-size: 0.85rem;
            color: #94a3b8;
        }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        .summary-card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }
        .summary-card.green { border-left: 4px solid #10b981; }
        .summary-card.yellow { border-left: 4px solid #f59e0b; }
        .summary-card.purple { border-left: 4px solid #8b5cf6; }
        .summary-card.red { border-left: 4px solid #ef4444; }
        .summary-card .value {
            font-size: 2rem;
            font-weight: bold;
            color: #fff;
        }
        .summary-card .label {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-top: 5px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab-btn {
            padding: 10px 20px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s;
        }
        .tab-btn.active, .tab-btn:hover {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            color: #fff;
            border-color: transparent;
        }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        .section {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .section h2 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #60a5fa;
        }
        
        .table-container { overflow-x: auto; }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        th {
            background: rgba(59,130,246,0.2);
            color: #60a5fa;
            font-weight: 600;
        }
        tr:hover { background: rgba(255,255,255,0.03); }
        
        .status-badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .status-green { background: rgba(16,185,129,0.2); color: #10b981; }
        .status-yellow { background: rgba(245,158,11,0.2); color: #f59e0b; }
        .status-red { background: rgba(239,68,68,0.2); color: #ef4444; }
        .status-purple { background: rgba(139,92,246,0.2); color: #a78bfa; }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .chart-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .chart-box {
            background: rgba(255,255,255,0.03);
            border-radius: 10px;
            padding: 15px;
        }
        
        .sync-info {
            text-align: center;
            padding: 15px;
            background: rgba(16,185,129,0.1);
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }
        .sync-info .time { color: #10b981; font-weight: bold; }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 1.4rem; }
            .summary-card .value { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“Š ì•„ì‚°ì‹œ í†µí•©ìì‚°ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ</h1>
        <div class="header-info">
            Digital OASIS - Smart Asset Management Platform v3.0<br>
            ì•„ì‚°ì‹œ ê°•ì†Œí˜• ìŠ¤ë§ˆíŠ¸ì‹œí‹° êµ¬ì¶•ì‚¬ì—… | ì œì¼ì—”ì§€ë‹ˆì–´ë§ PMO | ê´€ë¦¬ì: Danny
        </div>
    </div>
    
    <div class="container">
        <div class="sync-info">
            ğŸ”„ ë§ˆì§€ë§‰ ë™ê¸°í™”: <span class="time" id="lastSync">ë¡œë”©ì¤‘...</span> | 
            ì´ ìì‚°: <span id="totalAssets">-</span>ê°œ | 
            Notion DB ì‹¤ì‹œê°„ ì—°ë™
        </div>
        
        <div class="summary-grid">
            <div class="summary-card green">
                <div class="value" id="operatingAssets">-</div>
                <div class="label">ğŸ“¦ ìš´ì˜ ìì‚°</div>
            </div>
            <div class="summary-card yellow">
                <div class="value" id="pendingAssets">-</div>
                <div class="label">ğŸš€ ë„ì… ì˜ˆì •</div>
            </div>
            <div class="summary-card purple">
                <div class="value" id="projectCount">-</div>
                <div class="label">ğŸ—ï¸ ëŒ€í˜• í”„ë¡œì íŠ¸</div>
            </div>
            <div class="summary-card red">
                <div class="value" id="budgetRate">-</div>
                <div class="label">ğŸ“Š ì˜ˆì‚° ì§‘í–‰ë¥ </div>
            </div>
        </div>
        
        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('overview')">ğŸ“Š ì¢…í•©í˜„í™©</button>
            <button class="tab-btn" onclick="showTab('projects')">ğŸ—ï¸ í”„ë¡œì íŠ¸</button>
            <button class="tab-btn" onclick="showTab('newassets')">ğŸš€ ì‹ ê·œìì‚°</button>
            <button class="tab-btn" onclick="showTab('categories')">ğŸ“¦ ì¹´í…Œê³ ë¦¬</button>
        </div>
        
        <div id="overview" class="tab-content active">
            <div class="chart-container">
                <div class="section chart-box">
                    <h2>ğŸ“Š ì¹´í…Œê³ ë¦¬ë³„ ìì‚° ë¶„í¬</h2>
                    <canvas id="categoryChart"></canvas>
                </div>
                <div class="section chart-box">
                    <h2>ğŸ‘¤ ë‹´ë‹¹ìë³„ ìì‚° í˜„í™©</h2>
                    <canvas id="managerChart"></canvas>
                </div>
            </div>
            <div class="section">
                <h2>ğŸ—ï¸ ëŒ€í˜• ì¸í”„ë¼ í”„ë¡œì íŠ¸ ì§„í–‰ í˜„í™©</h2>
                <div class="table-container">
                    <table id="projectsTable">
                        <thead>
                            <tr>
                                <th>í”„ë¡œì íŠ¸ëª…</th>
                                <th>ì˜ˆì‚°</th>
                                <th>ë‹´ë‹¹ì</th>
                                <th>ìƒíƒœ</th>
                                <th>ì§„í–‰ë¥ </th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div id="projects" class="tab-content">
            <div class="section">
                <h2>ğŸ—ï¸ ëŒ€í˜• ì¸í”„ë¼ í”„ë¡œì íŠ¸ ìƒì„¸</h2>
                <div class="table-container">
                    <table id="projectsDetailTable">
                        <thead>
                            <tr>
                                <th>í”„ë¡œì íŠ¸ëª…</th>
                                <th>ì˜ˆì‚°</th>
                                <th>ë‹´ë‹¹ì</th>
                                <th>ìƒíƒœ</th>
                                <th>ì§„í–‰ë¥ </th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div id="newassets" class="tab-content">
            <div class="section">
                <h2>ğŸš€ ì‹ ê·œ ë„ì… ì˜ˆì • ìì‚°</h2>
                <div class="table-container">
                    <table id="newAssetsTable">
                        <thead>
                            <tr>
                                <th>í’ˆëª©</th>
                                <th>ìˆ˜ëŸ‰</th>
                                <th>ì˜ˆìƒê¸ˆì•¡</th>
                                <th>ìƒíƒœ</th>
                                <th>ìš°ì„ ìˆœìœ„</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div id="categories" class="tab-content">
            <div class="section">
                <h2>ğŸ“¦ ì¹´í…Œê³ ë¦¬ë³„ ìì‚° í˜„í™©</h2>
                <div class="table-container">
                    <table id="categoriesTable">
                        <thead>
                            <tr>
                                <th>ë¶„ë¥˜</th>
                                <th>ìˆ˜ëŸ‰</th>
                                <th>ê¸ˆì•¡</th>
                                <th>ë¹„ì¤‘</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let dashboardData = null;
        let categoryChart = null;
        let managerChart = null;
        
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
        
        function getStatusClass(status) {
            if (status.includes('ì™„ë£Œ') || status.includes('ì‚¬ìš©ì¤‘')) return 'status-green';
            if (status.includes('ì§„í–‰') || status.includes('í˜‘ìƒ') || status.includes('ì˜ˆì •')) return 'status-yellow';
            if (status.includes('ì¤€ë¹„') || status.includes('ì„ ì •')) return 'status-purple';
            return 'status-yellow';
        }
        
        function getPriorityClass(priority) {
            if (priority === 'high') return 'status-red';
            if (priority === 'medium') return 'status-yellow';
            return 'status-green';
        }
        
        function formatNumber(num) {
            return new Intl.NumberFormat('ko-KR').format(num);
        }
        
        function renderSummary(data) {
            document.getElementById('lastSync').textContent = new Date(data.syncInfo.lastSync).toLocaleString('ko-KR');
            document.getElementById('totalAssets').textContent = data.summary.totalAssets;
            document.getElementById('operatingAssets').textContent = data.summary.operatingAssets + 'ê°œ';
            document.getElementById('pendingAssets').textContent = data.summary.pendingAssets + 'ê°œ';
            document.getElementById('projectCount').textContent = data.projects.length + 'ê°œ';
            document.getElementById('budgetRate').textContent = data.summary.budgetExecutionRate + '%';
        }
        
        function renderProjects(data) {
            const tbody1 = document.querySelector('#projectsTable tbody');
            const tbody2 = document.querySelector('#projectsDetailTable tbody');
            const html = data.projects.map(p => `
                <tr>
                    <td>${p.name}</td>
                    <td>${p.budget}</td>
                    <td>${p.manager}</td>
                    <td><span class="status-badge ${getStatusClass(p.status)}">${p.status}</span></td>
                    <td>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${p.progress}%"></div>
                        </div>
                        <span style="font-size:0.8rem; color:#94a3b8;">${p.progress}%</span>
                    </td>
                </tr>
            `).join('');
            tbody1.innerHTML = html;
            tbody2.innerHTML = html;
        }
        
        function renderNewAssets(data) {
            const tbody = document.querySelector('#newAssetsTable tbody');
            tbody.innerHTML = data.newAssets.map(a => `
                <tr>
                    <td>${a.name}</td>
                    <td>${a.quantity}${a.quantity > 1 ? 'ëŒ€' : 'ì‹'}</td>
                    <td>${a.price}</td>
                    <td><span class="status-badge ${getStatusClass(a.status)}">${a.status}</span></td>
                    <td><span class="status-badge ${getPriorityClass(a.priority)}">${a.priority === 'high' ? 'ê¸´ê¸‰' : a.priority === 'medium' ? 'ë†’ìŒ' : 'ë³´í†µ'}</span></td>
                </tr>
            `).join('');
        }
        
        function renderCategories(data) {
            const tbody = document.querySelector('#categoriesTable tbody');
            tbody.innerHTML = data.categories.map(c => `
                <tr>
                    <td><span style="display:inline-block;width:12px;height:12px;background:${c.color};border-radius:50%;margin-right:8px;"></span>${c.name}</td>
                    <td>${c.count}ê°œ</td>
                    <td>â‚©${formatNumber(c.amount)}</td>
                    <td>${c.percentage}%</td>
                </tr>
            `).join('');
        }
        
        function renderCharts(data) {
            const ctx1 = document.getElementById('categoryChart').getContext('2d');
            if (categoryChart) categoryChart.destroy();
            categoryChart = new Chart(ctx1, {
                type: 'doughnut',
                data: {
                    labels: data.categories.map(c => c.name),
                    datasets: [{
                        data: data.categories.map(c => c.count),
                        backgroundColor: data.categories.map(c => c.color),
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { position: 'bottom', labels: { color: '#94a3b8' } }
                    }
                }
            });
            
            const ctx2 = document.getElementById('managerChart').getContext('2d');
            if (managerChart) managerChart.destroy();
            managerChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: data.managers.map(m => m.name),
                    datasets: [{
                        label: 'ìì‚° ìˆ˜',
                        data: data.managers.map(m => m.assetCount),
                        backgroundColor: ['#8b5cf6', '#3b82f6', '#10b981'],
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { ticks: { color: '#94a3b8' }, grid: { color: 'rgba(255,255,255,0.05)' } },
                        x: { ticks: { color: '#94a3b8' }, grid: { display: false } }
                    }
                }
            });
        }
        
        async function loadData() {
            try {
                const response = await fetch('./data/dashboard-data.json?' + Date.now());
                dashboardData = await response.json();
                renderSummary(dashboardData);
                renderProjects(dashboardData);
                renderNewAssets(dashboardData);
                renderCategories(dashboardData);
                renderCharts(dashboardData);
            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                document.getElementById('lastSync').textContent = 'ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨';
            }
        }
        
        document.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>
